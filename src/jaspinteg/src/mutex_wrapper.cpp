
#include "mutex_wrapper.h"


//-----------------------------------------------------------------------------------------------//
//-- MutexWrapper -------------------------------------------------------------------------------//
//-----------------------------------------------------------------------------------------------//

//-----------------------------------------------------------------------------------------------//
MutexWrapper::MutexWrapper()
{
  pthread_mutex_init(&m_mutex, NULL);
}

//-----------------------------------------------------------------------------------------------//
MutexWrapper::~MutexWrapper()
{
  pthread_mutex_destroy(&m_mutex);
}

//-----------------------------------------------------------------------------------------------//
void MutexWrapper::lock()
{
  pthread_mutex_lock(&m_mutex);
}

//-----------------------------------------------------------------------------------------------//
void MutexWrapper::unlock()
{
  pthread_mutex_unlock(&m_mutex);
}


//-----------------------------------------------------------------------------------------------//
//-- MutexWrapper -------------------------------------------------------------------------------//
//-----------------------------------------------------------------------------------------------//

//-----------------------------------------------------------------------------------------------//
ScopedMutex::ScopedMutex(MutexWrapper& mutex)
: m_mutex(mutex)
{
  m_mutex.lock();
}

//-----------------------------------------------------------------------------------------------//
ScopedMutex::~ScopedMutex()
{
  m_mutex.unlock();
}
